<!DOCTYPE html>
<html lang="ko">
  <head>

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>단어 빈도 분석기 - 창작자를 위한 분석 도구</title>
    <meta name="description" content="사용자 입력 텍스트에서 자주 쓰인 단어들을 두 가지로 분류해줍니다. 빠르고 직관적인 글쓰기 도우미.">
    <meta name="keywords" content="단어 분석기, 웹소설 도구, 글쓰기 도우미, 단어 빈도 체크, 글쓰기 툴, 포스타입 작가, 포타">
    <meta property="og:title" content="웹소설 작가를 위한 단어 빈도 분석기" />
    <meta property="og:description" content="내가 자주 쓰는 단어를 분석해보세요." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://simplesorter.cc" />
    <meta property="og:image" content="https://simplesorter.cc/og-image.jpg" />
    <meta name="theme-color" content="#ffffff">
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Simple Sorter - 단어 빈도 분석기" />
    <meta name="twitter:description" content="텍스트를 입력하면 단어 사용 빈도를 분석합니다." />
    <meta name="twitter:image" content="https://simplesorter.cc/images/og-image.png" />
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable.min.css" />
    <link rel="stylesheet" href="/style.css" />
    <link rel="icon" type="image/svg+xml" href="/images/logo.svg">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
    <link rel="mask-icon" href="/images/logo.svg" color="#111111">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9141843690761686"
    crossorigin="anonymous"></script>

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-5CPL32SRSN"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-5CPL32SRSN');
    </script>
  </head>
  <body>

    <nav class="main-nav">
      <div class="nav-logo">
        <a href="https://simplesorter.cc/">
          <img src="/images/title.svg">
        </a>
      </div>
      <div class="nav-links">
        <a href="/usage/">단어 빈도 분석기</a>
        <a href="/tips/">FAQ</a>
      </div>

      <div class="mode-toggle" onclick="toggleMode()">
        <div class="toggle-indicator"></div>
        <div class="toggle-option light">
          <img src="/images/light.svg" alt="Light Mode">

        </div>
        <div class="toggle-option dark">
          <img src="/images/dark.svg" alt="Dark Mode">

        </div>
      </div>
      
      
    </nav>
    
    
    <div class="page-wrapper">



      <div class="container">

        <div class="header">




          <div class="page-title">
            <h1>단어 빈도 분석기</h1>
          </div>
        </div>
        <div class="input-section">
          <textarea id="inputText" placeholder="분석할 문장을 입력해주세요"></textarea>
          <div id="spinnerOverlay" class="spinner-overlay">
            <div class="spinner"></div>
          </div>
        </div>
        
        <div class="analyze-btn-wrapper">
          <button class="analyze-btn" onclick="analyzeText()">분석하기</button>
        
          <div class="filter-wrapper">
            <button class="filter-toggle-btn" onclick="toggleFilter()">
              <img src="/images/filter.svg" alt="Filter">
            </button>
            <div class="filter-area" id="filterArea">
              <div class="filter-inner">
                <div class="filter-controls">
                  <input type="text" id="filterInput" placeholder="제외할 단어" />
                  <div class="filter-buttons">
                    <button onclick="addFilter()"><img src="/images/plus.svg" alt="Plus"></button>
                    <button onclick="clearAllFilters()"><img src="/images/delete.svg" alt="Plus"></button>
                  </div>
                </div>
                <ul class="filter-list" id="filterList" style="display: none;"></ul>
              </div>
            </div>
          </div>

          <div class="more-wrapper">
            <button class="more-btn" onclick="toggleMoreMenu()">
              <img src="/images/more.svg">
            </button>
            <ul class="more-dropdown" id="moreDropdown">
              <li onclick="exportData('txt')">
                <img src="/images/text.svg" alt="Txt"> TXT로 복사
              </li>
              <li onclick="exportData('md')">
                <img src="/images/sharp.svg" alt="Md"> MD로 저장
              </li>
              <li onclick="setMinFrequency()">
                <img src="/images/setting.svg" alt="Setting"> 설정
              </li>
            </ul>
          </div>

        </div>
        

        </div>
        <div class="result-tables" id="resultTables">
          <table id="nounTable">
            <thead><tr><th>명사</th><th>빈도</th></tr></thead>
            <tbody></tbody>
          </table>
          <table id="verbTable">
            <thead><tr><th>동사/형용사</th><th>빈도</th></tr></thead>
            <tbody></tbody>
          </table>
        </div>

        <section id="ss-embedded-toggles" class="ss-section">
          <details class="ss-toggle" open>
            <summary class="ss-summary">
              <span>단어 빈도 분석기?</span>
              <svg class="ss-caret" width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </summary>
            <div id="ss-usage"></div>
          </details>
        
          <details class="ss-toggle" open>
            <summary class="ss-summary">
              <span>FAQ</span>
              <svg class="ss-caret" width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
            </summary>
            <div id="ss-tips"></div>
          </details>
        </section>
        
        <style>
          /* 토글 자체 스타일(메인 style.css와 충돌 최소화를 위해 접두사 ss-) */
          #ss-embedded-toggles { max-width: 900px; margin: 28px auto 60px; padding: 0 8px; }
          .ss-toggle { border: 1px solid #eee; border-radius: 14px; background: #fbfbfb; box-shadow: 0 2px 10px rgba(0,0,0,.04); margin-bottom: 14px; overflow: hidden; }
          .ss-summary { list-style: none; cursor: pointer; padding: 16px 18px; font-weight: 600; display: flex; align-items: center; justify-content: space-between; gap: 12px; }
          .ss-summary::-webkit-details-marker { display: none; }
          .ss-toggle[open] .ss-caret { transform: rotate(180deg); }
          .ss-caret { transition: transform .2s ease; opacity: .7; }
          .ss-toggle > div { padding: 0; }
          /* 다크 모드 배경 대비 (메인 바디가 dark일 때 톤 맞춤) */
          body.dark .ss-toggle { background: #2a2a2a; border-color: #3a3a3a; box-shadow: 0 2px 10px rgba(0,0,0,.25); }
          body.dark .ss-summary { color: #e6e6e6; }
        </style>
        
      </div> 


      


  

      <footer class="site-footer">
        <p>© 2025 SimpleSorter &nbsp;
          <a href="privacy.html">개인정보처리방침</a> · 
          <a href="terms.html">이용약관</a>
        </p>
      </footer>

    </div>


    <script>

      let filterWords = [];
      let minFrequency = 5;


      function addFilter() {
        const input = document.getElementById('filterInput');
        const word = input.value.trim();
        if (word && !filterWords.includes(word)) {
          filterWords.push(word);
          updateFilterList();
          input.value = '';
        }
      }
  
      function toggleFilter() {
        const filterArea = document.getElementById('filterArea');
        filterArea.classList.toggle('show');
      }

      function setMinFrequency() {
        const value = prompt("최소 빈도를 입력하세요:", minFrequency);

        if (value === null) {
          return;
        }

        const num = parseInt(value, 10);
        if (!isNaN(num) && num > 0) {
          minFrequency = num;
          alert(`최소 빈도가 ${minFrequency}회로 설정되었습니다.`);
        }
      }

      document.getElementById('filterInput').addEventListener('keydown', function(e) {
        if (e.key === 'Enter') {
          e.preventDefault();
          addFilter();
        }
      });

      function removeFilter(word) {
        filterWords = filterWords.filter(w => w !== word);
        updateFilterList();
      }

      function clearAllFilters() {
        filterWords = [];
        updateFilterList();
      }

      function updateFilterList() {
        const list = document.getElementById('filterList');
        list.innerHTML = '';
        filterWords.forEach(word => {
          const li = document.createElement('li');
          li.innerHTML = `${word} <button onclick="removeFilter('${word}')">×</button>`;
          list.appendChild(li);
        });
        
        list.style.display = filterWords.length > 0 ? 'flex' : 'none';
      }



async function analyzeText() {
  const text = document.getElementById('inputText').value;
  

  const spinnerOverlay = document.getElementById('spinnerOverlay');
  const analyzeButton = document.querySelector('.analyze-btn');

  document.getElementById('resultTables').style.display = "flex";
  if (!text.trim()) {
    alert("내용을 입력하세요.");
    return;
  }


  spinnerOverlay.style.display = 'flex';
  analyzeButton.disabled = true;
  analyzeButton.textContent = '분석 중...';

  try {
    const response = await fetch("/analyze", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        text,
        min_freq: minFrequency
      })
    });
    if (!response.ok) {
      let msg = "서버 오류가 발생했습니다.";
      try {
        const err = await response.json();
        if (err && err.error) msg = err.error;
      } catch (_) {
        const text = await response.text();
        if (text) msg = text;
      }
      throw new Error(msg);
    }
    const data = await response.json();
    const nounBody = document.querySelector("#nounTable tbody");
    const verbBody = document.querySelector("#verbTable tbody");
    nounBody.innerHTML = "";
    verbBody.innerHTML = "";
    if ((!data.nouns || data.nouns.length === 0) && (!data.verbs || data.verbs.length === 0)) {
      nounBody.innerHTML = `<tr><td colspan="2">명사 결과 없음</td></tr>`;
      verbBody.innerHTML = `<tr><td colspan="2">동사/형용사 결과 없음</td></tr>`;
    } else {
      data.nouns.filter(([word]) => !filterWords.includes(word)).forEach(([word, count]) => {
        nounBody.innerHTML += `<tr><td>${word}</td><td>${count}</td></tr>`;
      });
      data.verbs.filter(([word]) => !filterWords.includes(word)).forEach(([word, count]) => {
        verbBody.innerHTML += `<tr><td>${word}</td><td>${count}</td></tr>`;
      });
    }
    document.getElementById('nounTable').style.display = "table";
    document.getElementById('verbTable').style.display = "table";
  } catch (err) {
    console.error(err);
    const msg = (err && err.message) ? err.message : "분석 중 오류가 발생했습니다.";
    alert(msg);
  } finally {

    spinnerOverlay.style.display = 'none';
    analyzeButton.disabled = false;
    analyzeButton.textContent = '분석하기';
  }
}

      document.addEventListener("DOMContentLoaded", () => {
        const savedTheme = localStorage.getItem("theme");
        if (savedTheme === "dark") {
          document.body.classList.add("dark");
        }
      });
      
      document.addEventListener("DOMContentLoaded", () => {
        const exportBtn = document.querySelector(".export-btn");
        const exportDropdown = document.getElementById("exportDropdown");

        if (exportBtn && exportDropdown) {
          exportBtn.addEventListener("click", (e) => {
            e.stopPropagation();
            exportDropdown.classList.toggle("show");
          });
        }

        document.addEventListener("click", (e) => {
          if (
            exportBtn && exportDropdown &&
            !exportBtn.contains(e.target) &&
            !exportDropdown.contains(e.target)
          ) {
            exportDropdown.classList.remove("show");
          }
        });
      });

      async function exportData(format) {
        const nounTable = document.getElementById("nounTable");
        const verbTable = document.getElementById("verbTable");
        const exportDropdown = document.getElementById("exportDropdown");

        const nounRows = Array.from(nounTable.querySelectorAll("tbody tr"))
          .map(tr => Array.from(tr.children).map(td => td.innerText));
        const verbRows = Array.from(verbTable.querySelectorAll("tbody tr"))
          .map(tr => Array.from(tr.children).map(td => td.innerText));

        const noResults = ((!nounRows.length || nounRows[0][0].includes("없음")) &&
                           (!verbRows.length || verbRows[0][0].includes("없음")));
        if (noResults) {
          showToast("분석 결과가 없습니다.");
          if (exportDropdown) exportDropdown.classList.remove("show");
          return;
        }

        const today = new Date();
        const dateStr = String(today.getMonth() + 1).padStart(2, '0') +
                        String(today.getDate()).padStart(2, '0');

        let content = "";
        let filename = `word-frequency_${dateStr}.${format}`;

        if (format === "txt") {
          content += "[명사]\n";
          nounRows.forEach(r => { if (r.length === 2) content += `${r[0]} - ${r[1]}회\n`; });
          content += "\n[동사/형용사]\n";
          verbRows.forEach(r => { if (r.length === 2) content += `${r[0]} - ${r[1]}회\n`; });
        } else if (format === "md") {
          content += "## 명사\n\n| 단어 | 빈도 |\n|------|------|\n";
          nounRows.forEach(r => { if (r.length === 2) content += `| ${r[0]} | ${r[1]} |\n`; });
          content += "\n## 동사/형용사\n\n| 단어 | 빈도 |\n|------|------|\n";
          verbRows.forEach(r => { if (r.length === 2) content += `| ${r[0]} | ${r[1]} |\n`; });
        }

        function showToast(message) {
          const existing = document.getElementById("simple-copy-toast");
          if (existing) existing.remove();

          const t = document.createElement("div");
          t.id = "simple-copy-toast";
          t.innerText = message;
          Object.assign(t.style, {
            position: "fixed",
            bottom: "24px",
            left: "50%",
            transform: "translateX(-50%)",
            padding: "8px 12px",
            fontSize: "13px",
            borderRadius: "6px",
            background: "rgba(0,0,0,0.8)",
            color: "#fff",
            zIndex: 2000,
            boxShadow: "0 1px 6px rgba(0,0,0,0.2)",
            opacity: "0",
            transition: "opacity 160ms ease",
            pointerEvents: "none",
          });
          document.body.appendChild(t);
          requestAnimationFrame(() => { t.style.opacity = "1"; });
          setTimeout(() => {
            t.style.opacity = "0";
            setTimeout(() => {
              const el = document.getElementById("simple-copy-toast");
              if (el) el.remove();
            }, 180);
          }, 1500);
        }

        if (format === "md") {
          const blob = new Blob([content], { type: "text/markdown;charset=utf-8" });
          const link = document.createElement("a");
          const url = URL.createObjectURL(blob);
          link.href = url;
          link.download = filename;
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
          URL.revokeObjectURL(url);
          if (exportDropdown) exportDropdown.classList.remove("show");
          return;
        }

        async function copyToClipboard(text) {
          if (navigator.clipboard && navigator.clipboard.writeText) {
            try {
              await navigator.clipboard.writeText(text);
              return true;
            } catch (e) {}
          }
          try {
            const ta = document.createElement("textarea");
            ta.value = text;
            ta.setAttribute("readonly", "");
            ta.style.position = "fixed";
            ta.style.left = "-9999px";
            document.body.appendChild(ta);
            ta.select();
            ta.setSelectionRange(0, ta.value.length);
            const ok = document.execCommand("copy");
            document.body.removeChild(ta);
            return !!ok;
          } catch (e) {
            return false;
          }
        }

        const copied = await copyToClipboard(content);
        if (copied) showToast("클립보드에 복사되었습니다.");

        if (exportDropdown) exportDropdown.classList.remove("show");
      }

      function toggleMode() {
        document.body.classList.toggle("dark");

        if (document.body.classList.contains("dark")) {
          setCookie("theme", "dark", 3);
          localStorage.setItem("theme", "dark");
        } else {
          setCookie("theme", "light", 3);
          localStorage.setItem("theme", "light");
        }
      }

      document.addEventListener("DOMContentLoaded", () => {
        const savedTheme = getCookie("theme") || localStorage.getItem("theme");
        if (savedTheme === "dark") {
          document.body.classList.add("dark");
        } else {
          document.body.classList.remove("dark");
        }
      });

      function setCookie(name, value, days) {
        const date = new Date();
        date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000);
        document.cookie = `${name}=${value}; expires=${date.toUTCString()}; path=/`;
      }

      function getCookie(name) {
        const value = `; ${document.cookie}`;
        const parts = value.split(`; ${name}=`);
        if (parts.length === 2) return parts.pop().split(";").shift();
      }

      document.addEventListener("DOMContentLoaded", () => {
      const savedTheme = localStorage.getItem("theme");
      if (savedTheme === "dark") document.body.classList.add("dark");
    });
    
    function toggleMode() {
  document.body.classList.toggle("dark");
}


function toggleMoreMenu() {
  const menu = document.getElementById('moreDropdown');
  const btn  = document.querySelector('.more-btn');


  menu.classList.toggle('show');
  btn.setAttribute('aria-expanded', menu.classList.contains('show'));
}


document.addEventListener('click', (e) => {
  const menu = document.getElementById('moreDropdown');
  const btn  = document.querySelector('.more-btn');
  if (!menu.contains(e.target) && !btn.contains(e.target)) {
    menu.classList.remove('show');
    btn.setAttribute('aria-expanded', 'false');
  }
});


document.addEventListener('keydown', (e) => {
  if (e.key === 'Escape') {
    const menu = document.getElementById('moreDropdown');
    const btn  = document.querySelector('.more-btn');
    menu.classList.remove('show');
    btn.setAttribute('aria-expanded', 'false');
  }
});


// 임시 스크립트


async function mountShadow({ hostId, htmlUrl, cssUrl, selector, scrub = [] }) {
  const host = document.getElementById(hostId);
  if (!host) return;

  const [htmlText, cssText] = await Promise.all([
    fetch(htmlUrl, { credentials: 'same-origin' }).then(r => r.text()),
    fetch(cssUrl,  { credentials: 'same-origin' }).then(r => r.text())
  ]);

  // HTML 파싱 후 지정 섹션만 추출
  const parser = new DOMParser();
  const doc = parser.parseFromString(htmlText, 'text/html');
  const picked = doc.querySelector(selector);
  const shadow = host.attachShadow({ mode: 'open' });

  if (!picked) {
    shadow.innerHTML = `<div style="padding:16px;color:#b00;font-size:14px">섹션(${selector})을 찾지 못했습니다.</div>`;
    return;
  }

  // body.dark → :host-context(body.dark) 로 교체하여 다크모드 연결
  // (그 외 전역 body 규칙은 그대로 두어 내부에서만 동작)
  const processedCss = cssText
    .replaceAll(/body\.dark/g, ':host-context(body.dark)')
    // 일부 reset이 바깥에 영향 못 주도록 :host 로 보강 (선택적으로 최소 적용)
    .replaceAll(/\n\s*body\s*{/g, '\n:host{' );

  // 섹션 복제 후 원본 전용 요소 제거
  const shell = document.createElement('div');
  shell.innerHTML = picked.outerHTML;

  // 페이지 전용 UI(홈버튼/모드토글/내비/푸터 등) 제거
  const removeList = [
    '.home-btn', '.mode-toggle', 'nav.main-nav', 'footer.site-footer',
    '.button-group', '.page-title'
  ].concat(scrub);

  removeList.forEach(sel => shell.querySelectorAll(sel).forEach(el => el.remove()));

  // Shadow DOM 주입
  shadow.innerHTML = `<style>${processedCss}</style>${shell.innerHTML}`;

  // Tips FAQ: 접힘/펼침 동작 부여
  if (selector.includes('tip-section-container')) {
    shadow.querySelectorAll('.faq-item .faq-question').forEach(btn => {
      btn.addEventListener('click', () => {
        const item = btn.closest('.faq-item');
        if (item) item.classList.toggle('active');
      });
    });
  }
}

// Usage 섹션 마운트
mountShadow({
  hostId: 'ss-usage',
  htmlUrl: '/usage/', 
  cssUrl: '/usage.css',
  selector: '.usage-container',
  scrub: []
});

// Tips 섹션 마운트
mountShadow({
  hostId: 'ss-tips',
  htmlUrl: '/tips/',  
  cssUrl: '/tips.css',
  selector: '.tip-section-container',
  scrub: []
});



    </script>



  </body>
</html>